<html><head><link rel="import" href="../polymer/polymer.html"><script>(function(){"use strict";Polymer.IronJsonpLibraryBehavior={properties:{libraryLoaded:{type:Boolean,value:!1,notify:!0,readOnly:!0},libraryErrorMessage:{type:String,value:null,notify:!0,readOnly:!0}},observers:["_libraryUrlChanged(libraryUrl)"],_libraryUrlChanged:function(){this._isReady&&this.libraryUrl&&this._loadLibrary()},_libraryLoadCallback:function(d,e){d?(Polymer.Base._warn("Library load failed:",d.message),this._setLibraryErrorMessage(d.message)):(this._setLibraryErrorMessage(null),this._setLibraryLoaded(!0),this.notifyEvent&&this.fire(this.notifyEvent,e))},_loadLibrary:function(){a.require(this.libraryUrl,this._libraryLoadCallback.bind(this),this.callbackName)},ready:function(){this._isReady=!0,this.libraryUrl&&this._loadLibrary()}};var a={apiMap:{},require:function(d,e,f){var g=this.nameFromUrl(d);this.apiMap[g]||(this.apiMap[g]=new b(g,d,f)),this.apiMap[g].requestNotify(e)},nameFromUrl:function(d){return d.replace(/[\:\/\%\?\&\.\=\-\,]/g,"_")+"_api"}},b=function(d,e,f){if(this.notifiers=[],!f)if(0<=e.indexOf(this.callbackMacro))f=d+"_loaded",e=e.replace(this.callbackMacro,f);else return void(this.error=new Error("IronJsonpLibraryBehavior a %%callback%% parameter is required in libraryUrl"));this.callbackName=f,window[this.callbackName]=this.success.bind(this),this.addScript(e)};b.prototype={callbackMacro:"%%callback%%",loaded:!1,addScript:function(d){var e=document.createElement("script");e.src=d,e.onerror=this.handleError.bind(this);var f=document.querySelector("script")||document.body;f.parentNode.insertBefore(e,f),this.script=e},removeScript:function(){this.script.parentNode&&this.script.parentNode.removeChild(this.script),this.script=null},handleError:function(){this.error=new Error("Library failed to load"),this.notifyAll(),this.cleanup()},success:function(){this.loaded=!0,this.result=Array.prototype.slice.call(arguments),this.notifyAll(),this.cleanup()},cleanup:function(){delete window[this.callbackName]},notifyAll:function(){this.notifiers.forEach(function(d){d(this.error,this.result)}.bind(this)),this.notifiers=[]},requestNotify:function(d){this.loaded||this.error?d(this.error,this.result):this.notifiers.push(d)}}})();</script><script>Polymer({is:'iron-jsonp-library',behaviors:[Polymer.IronJsonpLibraryBehavior],properties:{libraryUrl:String,callbackName:String,notifyEvent:String}});</script></head><body></body></html>